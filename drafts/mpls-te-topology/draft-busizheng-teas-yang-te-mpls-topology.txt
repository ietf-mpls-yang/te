



TEAS Working Group                                               I. Busi
Internet-Draft                                                  H. Zheng
Updates: 8776 (if approved)                          Huawei Technologies
Intended status: Standards Track                                  A. Guo
Expires: January 12, 2022                                 Futurewei Inc.
                                                                  X. Liu
                                                          Volta Networks
                                                           July 11, 2021


                 A YANG Data Model for MPLS-TE Topology
             draft-busizheng-teas-yang-te-mpls-topology-01

Abstract

   This document describes a YANG data model for Multi-Protocol Label
   Switching (MPLS) with Traffic Engineering (MPLS-TE) networks.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 12, 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Busi, et al.            Expires January 12, 2022                [Page 1]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Tree Diagram  . . . . . . . . . . . . . . . . . . . . . .   2
     1.2.  Prefixes in Data Node Names . . . . . . . . . . . . . . .   3
   2.  Packet TE Types Overview  . . . . . . . . . . . . . . . . . .   3
   3.  MPLS-TE Types Overview  . . . . . . . . . . . . . . . . . . .   4
   4.  MPLS-TE Topology Model Overview . . . . . . . . . . . . . . .   4
     4.1.  TE Label Augmentations  . . . . . . . . . . . . . . . . .   5
     4.2.  MPLS-TP Topology  . . . . . . . . . . . . . . . . . . . .   6
   5.  YANG model for common Packet TE Types . . . . . . . . . . . .   7
   6.  YANG model for common MPLS-TE Types . . . . . . . . . . . . .  19
   7.  YANG model for MPLS-TE Topology . . . . . . . . . . . . . . .  22
     7.1.  YANG Tree . . . . . . . . . . . . . . . . . . . . . . . .  22
     7.2.  YANG Code . . . . . . . . . . . . . . . . . . . . . . . .  25
   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  28
   9.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  28
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . .  28
     10.1.  Normative References . . . . . . . . . . . . . . . . . .  28
     10.2.  Informative References . . . . . . . . . . . . . . . . .  28
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  29
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  29

1.  Introduction

   This document describes a YANG data model for Multi-Protocol Label
   Switching (MPLS) with Traffic Engineering (MPLS-TE) networks.

   This document also defines a collection of common data types and
   groupings in YANG data modeling language for MPLS-TE networks.  These
   derived common types and groupings are intended to be imported by the
   MPLS-TE topology model, defined in this document, as well as by the
   MPLS-TE tunnel model, defined in [I-D.ietf-teas-yang-te-mpls].

   Multi-Protocol Label Switching - Transport Profile (MPLS-TP) is a
   profile of the MPLS protocol that is used in packet switched
   transport networks and operated in a similar manner to other existing
   transport technologies (e.g., OTN), as described in [RFC5921].  The
   YANG model defined in this document can also be for MPLS-TP networks.

1.1.  Tree Diagram

   A simplified graphical representation of the data model is used in
   Section 7.1 of this this document.  The meaning of the symbols in
   these diagrams is defined in [RFC8340].



Busi, et al.            Expires January 12, 2022                [Page 2]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


1.2.  Prefixes in Data Node Names

   In this document, names of data nodes and other data model objects
   are prefixed using the standard prefix associated with the
   corresponding YANG imported modules, as shown in Table 1.

   +--------------+----------------------+-----------------------------+
   | Prefix       | YANG module          | Reference                   |
   +--------------+----------------------+-----------------------------+
   | rt-types     | ietf-routing-types   | [RFC8294]                   |
   |              |                      |                             |
   | tet          | ietf-te-topology     | [RFC8795]                   |
   |              |                      |                             |
   | tet-pkt      | ietf-te-topology-    | [I-D.ietf-teas-yang-l3-te-t |
   |              | packet               | opo]                        |
   |              |                      |                             |
   | te-packet-   | ietf-te-packet-types | This document               |
   | types        |                      |                             |
   |              |                      |                             |
   | mte-types    | ietf-mpls-te-types   | This document               |
   |              |                      |                             |
   | tet-mpls     | ietf-te-mpls-        | This document               |
   |              | topology             |                             |
   +--------------+----------------------+-----------------------------+

             Table 1: Prefixes and corresponding YANG modules

2.  Packet TE Types Overview

   This document updates [RFC8776] with a new revision of the module
   ietf-te-packet-types.

   The module ietf-te-packet-types has been updated to add the following
   YANG identies, types and groupings which can be reused by MPLS-TE and
   other packet technologies YANG models:

   bandwidth-profile-type  This identity defines various bandwidth
      profiles specified by IETF and other organizations that may be
      used to limit bandwidth utilization of MPLS-TE LSPs.

   bandwidth-scientific-notation  This types represents the bandwidth in
      bit-per-second, using the scientific notation (e.g., 10e3).

   te-packet-path-bandwidth  This grouping defines the path bandwidth
      information and could be used in any Packet TE topology model
      (e.g., MPLS-TE) for the path bandwidth representation (e.g., the
      bandwidth of an MPLS-TE LSP).  All the path and LSP bandwidth
      related sections in generic module, [RFC8776], need to be



Busi, et al.            Expires January 12, 2022                [Page 3]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


      augmented with this grouping for the usage of Packet TE
      technologies.  This grouping is also applicable to set up the
      MPLS-TE tunnel.

      The Packet TE path bandwidth can be represented by a bandwidth
      profile as follow:

         +--:(packet)
           +--rw bandwidth-profile-name?   string
           +--rw bandwidth-profile-type?   identityref
           +--rw CIR?                      uint64
           +--rw EIR?                      uint64
           +--rw CBS?                      uint64
           +--rw EBS?                      uint64

   Other formats for the MPLS-TE path bandwidth are defined in
   [I-D.ietf-teas-yang-te-mpls] and they could be added in a future
   update of this document.

   te-packet-link-bandwidth  This grouping defines the link bandwidth
      information and could be used in any Packet TE topology model
      (e.g., MPLS-TE) for link bandwidth representation.  All the link
      bandwidth related sections in generic module, [RFC8776], need to
      be augmented with this grouping for the usage of Packet TE
      technologies.

      The Packet TE link bandwidth can be represented by a bandwidth
      expressed in scientific notation as follow:

         +--:(packet)
           +--rw packet-bandwidth?   bandwidth-scientific-notation

3.  MPLS-TE Types Overview

   The module ietf-mpls-te-types contains the following YANG types and
   groupings which can be reused by MPLS-TE YANG models:

   load-balancing-type  This identify defines the types of load-
      balancing algorithms used on bundled MPLS-TE link.

   te-mpls-label-hop  This grouping is used for the augmentation of TE
      label for MPLS-TE path.

4.  MPLS-TE Topology Model Overview

   The MPLS-TE technology specific topology model augments the ietf-te-
   topology-packet YANG module, defined in
   [I-D.ietf-teas-yang-l3-te-topo], which in turns augment the generic



Busi, et al.            Expires January 12, 2022                [Page 4]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


   ietf-te-topology YANG module, defined in [RFC8795], as shown in
   Figure 1.

                     +------------------+    o: augment
        TE generic   | ietf-te-topology |
                     +------------------+
                               o
                               |
                               |
                               |
                  +-------------------------+
        Packet TE | ietf-te-topology-packet |
                  +-------------------------+
                               o
                               |
                               |
                               |
                   +-----------------------+
        MPLS-TE    | ietf-te-mpls-topology |
                   +-----------------------+

     Figure 1: Relationship between MPLS-TE, Packet-TE and TE topology
                                  models

   Given the guidance for augmentation in [RFC8795], the following
   technology-specific augmentations need to be provided:

   o  A network-type to indicate that the TE topology is an MPLS-TE
      Topology, as follow:

        augment /nw:networks/nw:network/nw:network-types/tet:te-topology
                /tet-pkt:packet:
          +--rw mpls-topology!

   o  TE Label Augmentations as described in Section 4.1.

   Note: TE Bandwidth Augmentations for paths, LSPs and links are
   provided by the ietf-te-topology-packet module, defined in
   [I-D.ietf-teas-yang-l3-te-topo].

4.1.  TE Label Augmentations

   In MPLS-TE, the label allocation is done by NE, information about
   label values availability is not necessary to be provided to the
   controller.  Moreover, MPLS-TE tunnels are currently established
   within a single domain.





Busi, et al.            Expires January 12, 2022                [Page 5]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


   Therefore this document does not define any MPLS-TE technology-
   specific augmentations, of the TE Topology model, for the TE label
   since no TE label related attributes should be instantiated for MPLS-
   TE Topologies.

   Open issue: shall this module allows the setup of MPLS-TE multi-
   domain tunnels?

4.2.  MPLS-TP Topology

   Multi-Protocol Label Switching - Transport Profile (MPLS-TP) is a
   profile of the MPLS protocol that is used in packet switched
   transport networks and operated in a similar manner to other existing
   transport technologies (e.g., OTN), as described in [RFC5921].

   Therefore YANG model defined in this document can also be applicable
   for MPLS-TP networks.

   However, as described in [RFC5921], MPLS-TP networks support
   bidirectional LSPs and require no ECMP and no PHP.  When reporting
   the topology for an MPLS-TP network, additional information is
   required to indicate whether the network support these MPLS-TP
   characteristics.

   It is worth noting that [RFC8795] is already capable to model TE
   topologies supporting either unidirectional or bidirectional LSPs:
   all bidirectional TE links can support bidirectional LSPs and all the
   links can support unidirectional LSPs and it is always possible to
   associated unidirectional LSPs as long as they belong to the same
   tunnel.

   When setting up bidirectional LSPs (e.g., MPLS-TP LSPs) only
   bidirectional TE Links are selected by path computation.

   In order to allow reporting that ECMP is not affecting forwarding the
   packets of a given LSP, the load-balancing-type attribute reports
   whether a LAG or TE Bundled Link performs load-balancing on a per-
   flow or per-top-label:

       augment /nw:networks/nw:network/nt:link/tet:te:
         +--rw load-balancing-type?   mte-types:load-balancing-type

   When setting up LSPs which do not requires ECMP (e.g., MPLS-TP LSPs)
   only Links that are not part of a LAG or TE Bundle or that performs
   per-top-label load balancing are selected by path computation.






Busi, et al.            Expires January 12, 2022                [Page 6]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


   It is assumed that almost all the MPLS-TE nodes are capable to
   support Ultimate Hop Popping (UHP).  However, if some interfaces are
   not able to support UHP, they can report it in the MPLS-TE topology:

       augment /nw:networks/nw:network/nw:node/nt:termination-point
               /tet:te:
         +--ro uhp-incapable?   empty

   When setting up LSPs which do not requires PHP (e.g., MPLS-TP LSPs)
   only the interfaces (LTPs) which are capable to support UHP in the
   destination node are selected by path computation.

5.  YANG model for common Packet TE Types

   <CODE BEGINS>file "ietf-te-packet-types@2021-07-11.yang"
   module ietf-te-packet-types {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-te-packet-types";
     prefix te-packet-types;

     /* Import TE generic types */

     import ietf-te-types {
       prefix te-types;
       reference
         "RFC 8776: Common YANG Data Types for Traffic Engineering";
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";
     contact
       "WG Web:   <https://datatracker.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor:   Tarek Saad
                  <mailto:tsaad@juniper.net>

        Editor:   Rakesh Gandhi
                  <mailto:rgandhi@cisco.com>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Xufeng Liu
                  <mailto:xufeng.liu.ietf@gmail.com>

        Editor:   Igor Bryskin



Busi, et al.            Expires January 12, 2022                [Page 7]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


                  <mailto:i_bryskin@yahoo.com>";
     description
       "This YANG module contains a collection of generally useful YANG
        data type definitions specific to MPLS TE.  The model fully
        conforms to the Network Management Datastore Architecture
        (NMDA).

        Copyright (c) 2020 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Simplified BSD License set
        forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC 8776; see the
        RFC itself for full legal notices.";

     revision 2021-07-11 {
       description
         "Added common TE packet identities:
         - bandwidth-profile-type.

         Added common TE packet types:
         - bandwidth-scientific-notation.

         Added common TE packet groupings:
         - te-packet-path-bandwidth;
         - te-packet-link-bandwidth.";
       reference
         "draft-busizheng-teas-yang-te-mpls-topology";
     }

     revision 2020-06-10 {
       description
         "Latest revision of TE MPLS types.";
       reference
         "RFC 8776: Common YANG Data Types for Traffic Engineering";
     }

     /*
      * Identities
      */

     identity bandwidth-profile-type {
       description



Busi, et al.            Expires January 12, 2022                [Page 8]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


         "Bandwidth Profile Types";
     }

     identity mef-10-bwp {
       base bandwidth-profile-type;
       description
         "MEF 10 Bandwidth Profile";
     }

     identity rfc-2697-bwp {
       base bandwidth-profile-type;
       description
         "RFC 2697 Bandwidth Profile";
     }

     identity rfc-2698-bwp {
       base bandwidth-profile-type;
       description
         "RFC 2698 Bandwidth Profile";
     }

     identity rfc-4115-bwp {
       base bandwidth-profile-type;
       description
         "RFC 4115 Bandwidth Profile";
     }

     /*
      * Typedefs
      */

     typedef te-bandwidth-requested-type {
       type enumeration {
         enum specified {
           description
             "Bandwidth is explicitly specified.";
         }
         enum auto {
           description
             "Bandwidth is automatically computed.";
         }
       }
       description
         "Enumerated type for specifying whether bandwidth is
          explicitly specified or automatically computed.";
     }

     typedef te-class-type {



Busi, et al.            Expires January 12, 2022                [Page 9]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


       type uint8;
       description
         "Diffserv-TE Class-Type.  Defines a set of Traffic Trunks
          crossing a link that is governed by a specific set of
          bandwidth constraints.  Class-Type is used for the purposes
          of link bandwidth allocation, constraint-based routing, and
          admission control.";
       reference
         "RFC 4124: Protocol Extensions for Support of Diffserv-aware
          MPLS Traffic Engineering";
     }

     typedef bc-type {
       type uint8 {
         range "0..7";
       }
       description
         "Diffserv-TE bandwidth constraints as defined in RFC 4124.";
       reference
         "RFC 4124: Protocol Extensions for Support of Diffserv-aware
          MPLS Traffic Engineering";
     }

     typedef bandwidth-kbps {
       type uint64;
       units "Kbps";
       description
         "Bandwidth values, expressed in kilobits per second.";
     }

     typedef bandwidth-mbps {
       type uint64;
       units "Mbps";
       description
         "Bandwidth values, expressed in megabits per second.";
     }

     typedef bandwidth-gbps {
       type uint64;
       units "Gbps";
       description
         "Bandwidth values, expressed in gigabits per second.";
     }

     typedef bandwidth-scientific-notation {
       type string;
       units "bps";
       description



Busi, et al.            Expires January 12, 2022               [Page 10]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


         "Bandwidth values, expressed using the scientific notation
         (e.g., 10e3) in bits per second.";
     }

     identity backup-protection-type {
       description
         "Base identity for the backup protection type.";
     }

     identity backup-protection-link {
       base backup-protection-type;
       description
         "Backup provides link protection only.";
     }

     identity backup-protection-node-link {
       base backup-protection-type;
       description
         "Backup offers node (preferred) or link protection.";
     }

     identity bc-model-type {
       description
         "Base identity for the Diffserv-TE Bandwidth Constraints
          Model type.";
       reference
         "RFC 4124: Protocol Extensions for Support of Diffserv-aware
          MPLS Traffic Engineering";
     }

     identity bc-model-rdm {
       base bc-model-type;
       description
         "Russian Dolls Bandwidth Constraints Model type.";
       reference
         "RFC 4127: Russian Dolls Bandwidth Constraints Model for
                    Diffserv-aware MPLS Traffic Engineering";
     }

     identity bc-model-mam {
       base bc-model-type;
       description
         "Maximum Allocation Bandwidth Constraints Model type.";
       reference
         "RFC 4125: Maximum Allocation Bandwidth Constraints Model for
                    Diffserv-aware MPLS Traffic Engineering";
     }




Busi, et al.            Expires January 12, 2022               [Page 11]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


     identity bc-model-mar {
       base bc-model-type;
       description
         "Maximum Allocation with Reservation Bandwidth Constraints
          Model type.";
       reference
         "RFC 4126: Max Allocation with Reservation Bandwidth
          Constraints Model for Diffserv-aware MPLS Traffic Engineering
          & Performance Comparisons";
     }

     /*
      * Groupings
      */

     grouping performance-metrics-attributes-packet {
       description
         "Contains PM attributes.";
       uses te-types:performance-metrics-attributes {
         augment "performance-metrics-one-way" {
           leaf one-way-min-delay {
             type uint32 {
               range "0..16777215";
             }
             description
               "One-way minimum delay or latency in microseconds.";
           }
           leaf one-way-min-delay-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "One-way minimum delay or latency normality.";
           }
           leaf one-way-max-delay {
             type uint32 {
               range "0..16777215";
             }
             description
               "One-way maximum delay or latency in microseconds.";
           }
           leaf one-way-max-delay-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "One-way maximum delay or latency normality.";
           }
           leaf one-way-delay-variation {
             type uint32 {



Busi, et al.            Expires January 12, 2022               [Page 12]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


               range "0..16777215";
             }
             description
               "One-way delay variation in microseconds.";
             reference
               "RFC 5481: Packet Delay Variation Applicability
                Statement, Section 4.2";
           }
           leaf one-way-delay-variation-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "One-way delay variation normality.";
             reference
               "RFC 7471: OSPF Traffic Engineering (TE) Metric
                Extensions
                RFC 7823: Performance-Based Path Selection for
                Explicitly Routed Label Switched Paths (LSPs) Using
                TE Metric Extensions
                RFC 8570: IS-IS Traffic Engineering (TE) Metric
                Extensions";
           }
           leaf one-way-packet-loss {
             type decimal64 {
               fraction-digits 6;
               range "0..50.331642";
             }
             description
               "One-way packet loss as a percentage of the total traffic
                sent over a configurable interval.  The finest precision
                is 0.000003%, where the maximum is 50.331642%.";
             reference
               "RFC 8570: IS-IS Traffic Engineering (TE) Metric
                Extensions, Section 4.4";
           }
           leaf one-way-packet-loss-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "Packet loss normality.";
             reference
               "RFC 7471: OSPF Traffic Engineering (TE) Metric
                Extensions
                RFC 7823: Performance-Based Path Selection for
                Explicitly Routed Label Switched Paths (LSPs) Using
                TE Metric Extensions
                RFC 8570: IS-IS Traffic Engineering (TE) Metric
                Extensions";



Busi, et al.            Expires January 12, 2022               [Page 13]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


           }
           description
             "PM one-way packet-specific augmentation for a generic PM
              grouping.";
         }
         augment "performance-metrics-two-way" {
           leaf two-way-min-delay {
             type uint32 {
               range "0..16777215";
             }
             default "0";
             description
               "Two-way minimum delay or latency in microseconds.";
           }
           leaf two-way-min-delay-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "Two-way minimum delay or latency normality.";
             reference
               "RFC 7471: OSPF Traffic Engineering (TE) Metric
                Extensions
                RFC 7823: Performance-Based Path Selection for
                Explicitly Routed Label Switched Paths (LSPs) Using
                TE Metric Extensions
                RFC 8570: IS-IS Traffic Engineering (TE) Metric
                Extensions";
           }
           leaf two-way-max-delay {
             type uint32 {
               range "0..16777215";
             }
             default "0";
             description
               "Two-way maximum delay or latency in microseconds.";
           }
           leaf two-way-max-delay-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "Two-way maximum delay or latency normality.";
             reference
               "RFC 7471: OSPF Traffic Engineering (TE) Metric
                Extensions
                RFC 7823: Performance-Based Path Selection for
                Explicitly Routed Label Switched Paths (LSPs) Using
                TE Metric Extensions
                RFC 8570: IS-IS Traffic Engineering (TE) Metric



Busi, et al.            Expires January 12, 2022               [Page 14]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


                Extensions";
           }
           leaf two-way-delay-variation {
             type uint32 {
               range "0..16777215";
             }
             default "0";
             description
               "Two-way delay variation in microseconds.";
             reference
               "RFC 5481: Packet Delay Variation Applicability
                Statement, Section 4.2";
           }
           leaf two-way-delay-variation-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "Two-way delay variation normality.";
             reference
               "RFC 7471: OSPF Traffic Engineering (TE) Metric
                Extensions
                RFC 7823: Performance-Based Path Selection for
                Explicitly Routed Label Switched Paths (LSPs) Using
                TE Metric Extensions
                RFC 8570: IS-IS Traffic Engineering (TE) Metric
                Extensions";
           }
           leaf two-way-packet-loss {
             type decimal64 {
               fraction-digits 6;
               range "0..50.331642";
             }
             default "0";
             description
               "Two-way packet loss as a percentage of the total traffic
                sent over a configurable interval.  The finest precision
                is 0.000003%.";
           }
           leaf two-way-packet-loss-normality {
             type te-types:performance-metrics-normality;
             default "normal";
             description
               "Two-way packet loss normality.";
           }
           description
             "PM two-way packet-specific augmentation for a generic PM
              grouping.";
           reference



Busi, et al.            Expires January 12, 2022               [Page 15]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


             "RFC 7471: OSPF Traffic Engineering (TE) Metric Extensions
              RFC 7823: Performance-Based Path Selection for
              Explicitly Routed Label Switched Paths (LSPs) Using
              TE Metric Extensions
              RFC 8570: IS-IS Traffic Engineering (TE) Metric
              Extensions";
         }
       }
     }

     grouping one-way-performance-metrics-packet {
       description
         "One-way packet PM throttle grouping.";
       leaf one-way-min-delay {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "One-way minimum delay or latency in microseconds.";
       }
       leaf one-way-max-delay {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "One-way maximum delay or latency in microseconds.";
       }
       leaf one-way-delay-variation {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "One-way delay variation in microseconds.";
       }
       leaf one-way-packet-loss {
         type decimal64 {
           fraction-digits 6;
           range "0..50.331642";
         }
         default "0";
         description
           "One-way packet loss as a percentage of the total traffic
            sent over a configurable interval.  The finest precision is
            0.000003%.";
       }



Busi, et al.            Expires January 12, 2022               [Page 16]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


     }

     grouping two-way-performance-metrics-packet {
       description
         "Two-way packet PM throttle grouping.";
       leaf two-way-min-delay {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "Two-way minimum delay or latency in microseconds.";
       }
       leaf two-way-max-delay {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "Two-way maximum delay or latency in microseconds.";
       }
       leaf two-way-delay-variation {
         type uint32 {
           range "0..16777215";
         }
         default "0";
         description
           "Two-way delay variation in microseconds.";
       }
       leaf two-way-packet-loss {
         type decimal64 {
           fraction-digits 6;
           range "0..50.331642";
         }
         default "0";
         description
           "Two-way packet loss as a percentage of the total traffic
            sent over a configurable interval.  The finest precision is
            0.000003%.";
       }
     }

     grouping performance-metrics-throttle-container-packet {
       description
         "Packet PM threshold grouping.";
       uses te-types:performance-metrics-throttle-container {
         augment "throttle/threshold-out" {
           uses one-way-performance-metrics-packet;



Busi, et al.            Expires January 12, 2022               [Page 17]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


           uses two-way-performance-metrics-packet;
           description
             "PM threshold-out packet augmentation for a
              generic grouping.";
         }
         augment "throttle/threshold-in" {
           uses one-way-performance-metrics-packet;
           uses two-way-performance-metrics-packet;
           description
             "PM threshold-in packet augmentation for a
              generic grouping.";
         }
         augment "throttle/threshold-accelerated-advertisement" {
           uses one-way-performance-metrics-packet;
           uses two-way-performance-metrics-packet;
           description
             "PM accelerated advertisement packet augmentation for a
              generic grouping.";
         }
       }
     }

     grouping te-packet-path-bandwidth {
       description
         "Path bandwidth for Packet. ";
       leaf bandwidth-profile-name{
         type string;
         description "Name of Bandwidth Profile.";
       }
       leaf bandwidth-profile-type {
         type identityref {
           base bandwidth-profile-type;
         }
         description "Type of Bandwidth Profile.";
       }

       leaf CIR {
         type uint64;
           description
             "Committed Information Rate in Kbps";
       }

       leaf EIR {
         type uint64;
         /*
           Need to indicate that EIR is not supported by RFC 2697

           must



Busi, et al.            Expires January 12, 2022               [Page 18]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


               '../bw-profile-type = "etht-types:mef-10-bwp" or ' +
               '../bw-profile-type = "etht-types:rfc-2698-bwp" or ' +
               '../bw-profile-type = "etht-types:rfc-4115-bwp"'

           must
               '../bw-profile-type != "etht-types:rfc-2697-bwp"'
         */
         description
           "Excess Information Rate in Kbps
           In case of RFC 2698, PIR = CIR + EIR";
       }

       leaf CBS {
         type uint64;
         description
           "Committed Burst Size in in KBytes";
       }

       leaf EBS {
         type uint64;
         description
           "Excess Burst Size in KBytes.
             In case of RFC 2698, PBS = CBS + EBS";
       }
     }

     grouping te-packet-link-bandwidth {
       description
         "Link Bandwidth for Packet. ";
       leaf packet-bandwidth {
         type bandwidth-scientific-notation;
         description
           "Available bandwith value expressed in kilobits per
            second";
       }
     }
   }
   <CODE ENDS>

                   Figure 2: Packet TE Types YANG model

6.  YANG model for common MPLS-TE Types

   <CODE BEGINS>file "ietf-mpls-te-types@2021-07-11.yang"
   module ietf-mpls-te-types {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-mpls-te-types";




Busi, et al.            Expires January 12, 2022               [Page 19]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


     prefix "mte-types";

     import ietf-routing-types {
       prefix "rt-types";
     }

     import ietf-te-packet-types {
       prefix "te-packet-types";
       reference
         "RFC 8776: Common YANG Data Types for Traffic Engineering";
     }

     organization
       "Internet Engineering Task Force (IETF) TEAS WG";
     contact
       "WG Web:   <https://datatracker.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor: Italo Busi
          <mailto:italo.busi@huawei.com>

        Editor: Haomian Zheng
          <mailto:zhenghaomian@huawei.com>

        Editor: Aihua Guo
          <mailto:aihuaguo.ietf@gmail.com>

        Editor: Xufeng Liu
          <mailto:xufeng.liu.ietf@gmail.com>";

     description
       "This module defines technology-specific MPLS-TE types
        data model.

        Copyright (c) 2021 IETF Trust and the persons identified
        as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with
        or without modification, is permitted pursuant to, and
        subject to the license terms contained in, the Simplified
        BSD License set forth in Section 4.c of the IETF Trust's
        Legal Provisions Relating to IETF Documents
        (http://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC XXXX; see
        the RFC itself for full legal notices.";

     revision 2021-07-11 {



Busi, et al.            Expires January 12, 2022               [Page 20]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


       description
         "Initial Version";
       reference
         "draft-busizheng-teas-yang-te-mpls-topology";
     }

     /*
     * Typedefs
     */

     typedef load-balancing-type {
       type enumeration {
         enum per-flow {
           description
             "The load-balancing algorithm ensures that packets
              characterized as the same flow (e.g. based on IP 5-tuple)
              that egress on a LAG or a bundled TE link are forwarded
              on the same component link.

              Packets for different flows within the same LSP can be
              forwarded on different component links.";
         }
         enum per-top-label {
           description
             "The load-balancing algorithm ensures incoming MPLS
              packets with the same top MPLS label and that egress on
              on a LAG or bundled TE link are forwarded on the same
              component link.

              Packets for different flows within the same LSP are
              forwarded on the same component link.";
         }
       }
       description
         "The type of load balancing used on bundled links.";
     }  // typedef load-balancing-type

     /*
     * Groupings
     */

     grouping te-mpls-label-hop {
       description
         "MPLS-TE Label Hop.";

       leaf mpls-label {
         type rt-types:mpls-label;
         description



Busi, et al.            Expires January 12, 2022               [Page 21]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


           "MPLS Label.";
       }
     }  // grouping te-mpls-label-hop
   }
   <CODE ENDS>

                    Figure 3: MPLS-TE Types YANG model

7.  YANG model for MPLS-TE Topology

7.1.  YANG Tree

   Figure 4 below shows the tree diagram of the YANG model defined in
   module ietf-te-mpls-topology.yang.

   module: ietf-te-mpls-topology

     augment /nw:networks/nw:network/nw:node/nt:termination-point/tet:te
               /tet:interface-switching-capability/tet:max-lsp-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw bandwidth-profile-name?   string
          +--rw bandwidth-profile-type?   identityref
          +--rw CIR?                      uint64
          +--rw EIR?                      uint64
          +--rw CBS?                      uint64
          +--rw EBS?                      uint64
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:te-node-attributes/tet:connectivity-matrices
               /tet:path-constraints/tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:te-node-attributes/tet:connectivity-matrices
               /tet:connectivity-matrix/tet:path-constraints
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:information-source-entry/tet:connectivity-matrices
               /tet:path-constraints/tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--ro packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:information-source-entry/tet:connectivity-matrices
               /tet:connectivity-matrix/tet:path-constraints
               /tet:te-bandwidth/tet:technology:
       +--:(packet)



Busi, et al.            Expires January 12, 2022               [Page 22]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


          +--ro packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:tunnel-termination-point/tet:client-layer-adaptation
               /tet:switching-capability/tet:te-bandwidth
               /tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:tunnel-termination-point
               /tet:local-link-connectivities/tet:path-constraints
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:node/tet:te
               /tet:tunnel-termination-point
               /tet:local-link-connectivities
               /tet:local-link-connectivity/tet:path-constraints
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:te-link-attributes
               /tet:interface-switching-capability/tet:max-lsp-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw bandwidth-profile-name?   string
          +--rw bandwidth-profile-type?   identityref
          +--rw CIR?                      uint64
          +--rw EIR?                      uint64
          +--rw CBS?                      uint64
          +--rw EBS?                      uint64
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:te-link-attributes/tet:max-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:te-link-attributes/tet:max-resv-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:te-link-attributes/tet:unreserved-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:information-source-entry



Busi, et al.            Expires January 12, 2022               [Page 23]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


               /tet:interface-switching-capability/tet:max-lsp-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--ro bandwidth-profile-name?   string
          +--ro bandwidth-profile-type?   identityref
          +--ro CIR?                      uint64
          +--ro EIR?                      uint64
          +--ro CBS?                      uint64
          +--ro EBS?                      uint64
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:information-source-entry/tet:max-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--ro packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:information-source-entry/tet:max-resv-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--ro packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nt:link/tet:te
               /tet:information-source-entry/tet:unreserved-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--ro packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/tet:te/tet:templates/tet:link-template
               /tet:te-link-attributes
               /tet:interface-switching-capability/tet:max-lsp-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw bandwidth-profile-name?   string
          +--rw bandwidth-profile-type?   identityref
          +--rw CIR?                      uint64
          +--rw EIR?                      uint64
          +--rw CBS?                      uint64
          +--rw EBS?                      uint64
     augment /nw:networks/tet:te/tet:templates/tet:link-template
               /tet:te-link-attributes/tet:max-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/tet:te/tet:templates/tet:link-template
               /tet:te-link-attributes/tet:max-resv-link-bandwidth
               /tet:te-bandwidth/tet:technology:
       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/tet:te/tet:templates/tet:link-template
               /tet:te-link-attributes/tet:unreserved-bandwidth
               /tet:te-bandwidth/tet:technology:



Busi, et al.            Expires January 12, 2022               [Page 24]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


       +--:(packet)
          +--rw packet-bandwidth?   bandwidth-scientific-notation
     augment /nw:networks/nw:network/nw:network-types/tet:te-topology
               /tet-pkt:packet:
       +--rw mpls-topology!
     augment /nw:networks/nw:network/nt:link/tet:te:
       +--rw load-balancing-type?   mte-types:load-balancing-type
     augment /nw:networks/nw:network/nw:node/nt:termination-point
               /tet:te:
       +--ro uhp-incapable?   empty

                   Figure 4: MPLS-TE topology YANG tree

7.2.  YANG Code

   <CODE BEGINS>file "ietf-te-mpls-topology@2021-07-11.yang"
   module ietf-te-mpls-topology {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-te-mpls-topology";

     prefix "tet-mpls";

     import ietf-network {
       prefix "nw";
     }

     import ietf-network-topology {
       prefix "nt";
     }

     import ietf-te-topology {
       prefix "tet";
     }

     import ietf-te-topology-packet {
       prefix "tet-pkt";
     }

     import ietf-te-packet-types {
       prefix "te-packet-types";
     }

     import ietf-mpls-te-types {
       prefix "mte-types";
     }

     organization
       "Internet Engineering Task Force (IETF) TEAS WG";



Busi, et al.            Expires January 12, 2022               [Page 25]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


     contact
       "WG Web:   <https://datatracker.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        Editor: Italo Busi
          <mailto:italo.busi@huawei.com>

        Editor: Haomian Zheng
          <mailto:zhenghaomian@huawei.com>

        Editor: Aihua Guo
          <mailto:aihuaguo.ietf@gmail.com>

        Editor: Xufeng Liu
          <mailto:xufeng.liu.ietf@gmail.com>";

     description
       "This module defines technology-specific MPLS-TE topology
        data model.

        Copyright (c) 2021 IETF Trust and the persons identified
        as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with
        or without modification, is permitted pursuant to, and
        subject to the license terms contained in, the Simplified
        BSD License set forth in Section 4.c of the IETF Trust's
        Legal Provisions Relating to IETF Documents
        (http://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC XXXX; see
        the RFC itself for full legal notices.";

     revision 2021-07-11 {
       description
         "Initial Version";
       reference
         "draft-busizheng-teas-yang-te-mpls-topology";
     }

     /*
      * Augmentations
      */

     augment "/nw:networks/nw:network/nw:network-types/"
           + "tet:te-topology/tet-pkt:packet" {
       description
         "Augment network types to include MPLS-TE Topology Type";



Busi, et al.            Expires January 12, 2022               [Page 26]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


       container mpls-topology {
         presence
           "Indicates an MPLS-TE Topology Type.";
         description
           "Its presence indicates an MPLS-TE Topology";
       }
     }

     augment "/nw:networks/nw:network/nt:link/tet:te" {
       when "../../nw:network-types/tet:te-topology/"
          + "tet-pkt:packet/tet-mpls:mpls-topology"  {
         description
           "Augment MPLS-TE Topology.";
       }
       description
         "Augment TE Link.";

       leaf load-balancing-type {
         type mte-types:load-balancing-type;
         default 'per-flow';
         description
           "Indicates the type of load-balancing (per-flow or per-LSP)
            performed by the bundled TE Link.

            This leaf is not present when the TE Link is not bundled.";
       }  // leaf load-balancing-type
     }

     augment "/nw:networks/nw:network/nw:node/nt:termination-point/"
           + "tet:te" {
       when "../../../nw:network-types/tet:te-topology/"
          + "tet-pkt:packet/tet-mpls:mpls-topology" {
         description "Augment MPLS-TE Topology.";
       }
       description "Augment LTP.";

       leaf uhp-incapable {
         type empty;
         config false;
         description
           "When present, indicates that the LTP is not capable to
            support Ultimate Hop Popping (UHP).";
       }   // leaf uhp-incapable
     }
   }
   <CODE ENDS>

                  Figure 5: MPLS-TE topology YANG module



Busi, et al.            Expires January 12, 2022               [Page 27]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


8.  Security Considerations

   To be added.

9.  IANA Considerations

   To be added.

10.  References

10.1.  Normative References

   [I-D.ietf-teas-yang-l3-te-topo]
              Liu, X., Bryskin, I., Beeram, V. P., Saad, T., Shah, H.,
              and O. G. D. Dios, "YANG Data Model for Layer 3 TE
              Topologies", draft-ietf-teas-yang-l3-te-topo-10 (work in
              progress), February 2021.

   [RFC8294]  Liu, X., Qu, Y., Lindem, A., Hopps, C., and L. Berger,
              "Common YANG Data Types for the Routing Area", RFC 8294,
              DOI 10.17487/RFC8294, December 2017,
              <https://www.rfc-editor.org/info/rfc8294>.

   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8776]  Saad, T., Gandhi, R., Liu, X., Beeram, V., and I. Bryskin,
              "Common YANG Data Types for Traffic Engineering",
              RFC 8776, DOI 10.17487/RFC8776, June 2020,
              <https://www.rfc-editor.org/info/rfc8776>.

   [RFC8795]  Liu, X., Bryskin, I., Beeram, V., Saad, T., Shah, H., and
              O. Gonzalez de Dios, "YANG Data Model for Traffic
              Engineering (TE) Topologies", RFC 8795,
              DOI 10.17487/RFC8795, August 2020,
              <https://www.rfc-editor.org/info/rfc8795>.

10.2.  Informative References

   [I-D.ietf-teas-yang-te-mpls]
              Saad, T., Gandhi, R., Liu, X., Beeram, V. P., and I.
              Bryskin, "A YANG Data Model for MPLS Traffic Engineering
              Tunnels", draft-ietf-teas-yang-te-mpls-03 (work in
              progress), March 2020.






Busi, et al.            Expires January 12, 2022               [Page 28]

Internet-Draft         MPLS-TE Topology YANG Model             July 2021


   [RFC5921]  Bocci, M., Ed., Bryant, S., Ed., Frost, D., Ed., Levrau,
              L., and L. Berger, "A Framework for MPLS in Transport
              Networks", RFC 5921, DOI 10.17487/RFC5921, July 2010,
              <https://www.rfc-editor.org/info/rfc5921>.

Acknowledgments

   The authors would also like to thank Tarek Saad, Vishnu Pavan Beeram,
   Rakesh Gandhi, Xufeng Liu, Igor Bryskin for their input on how to
   support MPLS-TP features (bidirectional LSPs, no ECMP, no PHP) using
   a common MPLS-TE topology model.

   We thank Loa Andersson and Igor Bryskin for providing useful
   suggestions for this draft.

   This document was prepared using kramdown.

   Previous versions of this document was prepared using 2-Word-
   v2.0.template.dot.

Authors' Addresses

   Italo Busi
   Huawei Technologies

   Email: italo.busi@huawei.com


   Haomian Zheng
   Huawei Technologies

   Email: zhenghaomian@huawei.com


   Aihua Guo
   Futurewei Inc.

   Email: aihuaguo.ietf@gmail.com


   Xufeng Liu
   Volta Networks

   Email: xufeng.liu.ietf@gmail.com







Busi, et al.            Expires January 12, 2022               [Page 29]
